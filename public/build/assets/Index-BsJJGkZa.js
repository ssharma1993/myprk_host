import{c as re,b as ae,u as ne,j as t,a as ie,H as ce}from"./app-DpRc22vJ.js";import{A as oe}from"./app-layout-DjwQA7tZ.js";import{u as de}from"./route-BgTQN6e2.js";/* empty css            */import"./app-logo-icon-FQWZ9qrA.js";import"./index-BwcwFRfU.js";import"./index-CXRjnO_N.js";import"./index-rKHduuoP.js";function je(se){const e=re.c(82),{subscribers:o,stats:r}=se,a=de(),{flash:n}=ae().props,i=n?.newsletterStatus;let P;e[0]===Symbol.for("react.memo_cache_sentinel")?(P={subject:"",content:""},e[0]=P):P=e[0];const{data:l,setData:d,post:Q,processing:C,errors:te,reset:V}=ne(P);let R;e[1]!==l.content||e[2]!==l.subject||e[3]!==a?(R=()=>{const s=l.subject||"Newsletter Preview",c=l.content||"This is a preview of your newsletter message.",le=new URLSearchParams({subject:s,content:c});return`${a("newsletter.preview")}?${le.toString()}`},e[1]=l.content,e[2]=l.subject,e[3]=a,e[4]=R):R=e[4];const W=R;let U;e[5]!==Q||e[6]!==V||e[7]!==a?(U=s=>{s.preventDefault(),Q(a("newsletter.send"),{onSuccess:()=>V("subject","content")})},e[5]=Q,e[6]=V,e[7]=a,e[8]=U):U=e[8];const X=U;let q;e[9]!==a?(q=s=>{confirm("Delete this subscriber?")&&ie.delete(a("newsletter.subscribers.destroy",s),{preserveScroll:!0})},e[9]=a,e[10]=q):q=e[10];const E=q;let F;e[11]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(ce,{title:"Newsletter"}),e[11]=F):F=e[11];let L;e[12]===Symbol.for("react.memo_cache_sentinel")?(L=[{title:"Newsletter"}],e[12]=L):L=e[12];let T;e[13]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),e[13]=T):T=e[13];let m;e[14]!==r.total?(m=t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[T,t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.total})]}),e[14]=r.total,e[15]=m):m=e[15];let H;e[16]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),e[16]=H):H=e[16];let x;e[17]!==r.active?(x=t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[H,t.jsx("p",{className:"text-2xl font-semibold text-green-600",children:r.active})]}),e[17]=r.active,e[18]=x):x=e[18];let I;e[19]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("p",{className:"text-sm text-gray-500",children:"Unsubscribed"}),e[19]=I):I=e[19];let b;e[20]!==r.inactive?(b=t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[I,t.jsx("p",{className:"text-2xl font-semibold text-gray-600",children:r.inactive})]}),e[20]=r.inactive,e[21]=b):b=e[21];let u;e[22]!==x||e[23]!==b||e[24]!==m?(u=t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[m,x,b]}),e[22]=x,e[23]=b,e[24]=m,e[25]=u):u=e[25];let M,z;e[26]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Send Newsletter"}),z=t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"This will send to all active subscribers."}),e[26]=M,e[27]=z):(M=e[26],z=e[27]);let h;e[28]!==n?(h=n?.success&&t.jsx("div",{className:"mt-4 rounded-lg border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-800",children:n.success}),e[28]=n,e[29]=h):h=e[29];let g;e[30]!==n?(g=n?.warning&&t.jsx("div",{className:"mt-4 rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800",children:n.warning}),e[30]=n,e[31]=g):g=e[31];let f;e[32]!==i?(f=i&&t.jsxs("div",{className:"mt-4 rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm text-gray-800",children:[t.jsxs("p",{children:["Send status: ",i.sent,"/",i.total," sent,"," ",i.failed," failed."]}),i.failed>0&&t.jsxs("p",{className:"mt-1 text-xs break-all text-gray-600",children:["Failed emails:"," ",i.failed_emails.join(", ")]})]}),e[32]=i,e[33]=f):f=e[33];let B;e[34]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-900",children:"Subject"}),e[34]=B):B=e[34];const Y=`w-full rounded-lg border px-4 py-2 outline-none focus:ring-2 focus:ring-blue-500 ${te.subject?"border-red-500 bg-red-50":"border-gray-300"}`;let p;e[35]!==d?(p=s=>d("subject",s.target.value),e[35]=d,e[36]=p):p=e[36];let j;e[37]!==l.subject||e[38]!==Y||e[39]!==p?(j=t.jsxs("div",{children:[B,t.jsx("input",{className:Y,value:l.subject,onChange:p,required:!0})]}),e[37]=l.subject,e[38]=Y,e[39]=p,e[40]=j):j=e[40];let G;e[41]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-900",children:"Message"}),e[41]=G):G=e[41];const Z=`w-full rounded-lg border px-4 py-2 outline-none focus:ring-2 focus:ring-blue-500 ${te.content?"border-red-500 bg-red-50":"border-gray-300"}`;let y;e[42]!==d?(y=s=>d("content",s.target.value),e[42]=d,e[43]=y):y=e[43];let N;e[44]!==l.content||e[45]!==Z||e[46]!==y?(N=t.jsxs("div",{children:[G,t.jsx("textarea",{className:Z,rows:6,value:l.content,onChange:y,required:!0})]}),e[44]=l.content,e[45]=Z,e[46]=y,e[47]=N):N=e[47];const ee=C?"Sending...":"Send Email";let v;e[48]!==C||e[49]!==ee?(v=t.jsx("button",{type:"submit",className:"rounded-lg bg-blue-600 px-6 py-2 font-medium text-white transition hover:bg-blue-700 disabled:opacity-50",disabled:C,children:ee}),e[48]=C,e[49]=ee,e[50]=v):v=e[50];let w;e[51]!==W?(w=t.jsx("button",{type:"button",className:"rounded-lg border border-gray-300 bg-white px-6 py-2 font-medium text-gray-700 transition hover:bg-gray-50",onClick:()=>window.open(W(),"_blank","noopener,noreferrer"),children:"Preview Email"}),e[51]=W,e[52]=w):w=e[52];let S;e[53]!==v||e[54]!==w?(S=t.jsxs("div",{className:"flex flex-wrap gap-3",children:[v,w]}),e[53]=v,e[54]=w,e[55]=S):S=e[55];let _;e[56]!==X||e[57]!==j||e[58]!==N||e[59]!==S?(_=t.jsxs("form",{onSubmit:X,className:"mt-6 space-y-4",children:[j,N,S]}),e[56]=X,e[57]=j,e[58]=N,e[59]=S,e[60]=_):_=e[60];let D;e[61]!==h||e[62]!==g||e[63]!==f||e[64]!==_?(D=t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6",children:[M,z,h,g,f,_]}),e[61]=h,e[62]=g,e[63]=f,e[64]=_,e[65]=D):D=e[65];let J;e[66]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Subscribers"}),e[66]=J):J=e[66];let K;e[67]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("thead",{children:t.jsxs("tr",{className:"text-left",children:[t.jsx("th",{className:"px-3 py-2",children:"Email"}),t.jsx("th",{className:"px-3 py-2",children:"Status"}),t.jsx("th",{className:"px-3 py-2",children:"Subscribed"}),t.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),e[67]=K):K=e[67];let k;e[68]!==o.length?(k=o.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"px-3 py-6 text-center text-sm text-gray-500",children:"No subscribers yet"})}),e[68]=o.length,e[69]=k):k=e[69];let $;if(e[70]!==E||e[71]!==o){let s;e[73]!==E?(s=c=>t.jsxs("tr",{className:"border-t",children:[t.jsx("td",{className:"px-3 py-2",children:c.email}),t.jsx("td",{className:"px-3 py-2",children:t.jsx("span",{className:`rounded-full px-2 py-1 text-xs ${c.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:c.is_active?"Active":"Unsubscribed"})}),t.jsx("td",{className:"px-3 py-2 text-gray-500",children:new Date(c.created_at).toLocaleDateString()}),t.jsx("td",{className:"px-3 py-2",children:t.jsx("button",{onClick:()=>E(c.id),className:"text-sm font-medium text-red-600 hover:text-red-700",children:"Delete"})})]},c.id),e[73]=E,e[74]=s):s=e[74],$=o.map(s),e[70]=E,e[71]=o,e[72]=$}else $=e[72];let A;e[75]!==k||e[76]!==$?(A=t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6",children:[J,t.jsx("div",{className:"mt-4 overflow-x-auto",children:t.jsxs("table",{className:"w-full table-auto text-sm",children:[K,t.jsxs("tbody",{children:[k,$]})]})})]}),e[75]=k,e[76]=$,e[77]=A):A=e[77];let O;return e[78]!==u||e[79]!==D||e[80]!==A?(O=t.jsxs(t.Fragment,{children:[F,t.jsx(oe,{breadcrumbs:L,children:t.jsxs("div",{className:"space-y-8",children:[u,D,A]})})]}),e[78]=u,e[79]=D,e[80]=A,e[81]=O):O=e[81],O}export{je as default};
